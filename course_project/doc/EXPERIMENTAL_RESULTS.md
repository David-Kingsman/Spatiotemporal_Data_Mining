# 实验结果汇总

本文档汇总了所有实验的结果，包括模型训练结果和交叉验证结果。

## 1. 测试集评估结果

所有模型在独立测试集上的性能表现。

### 1.1 Tree Model (XGBoost)

**配置文件**: `output/results/tree_results.json`

| 指标 | 值 |
|------|-----|
| **RMSE** | 3.89 K |
| **MAE** | 2.86 K |
| **R²** | 0.793 |
| **MAPE** | 0.92% |
| **CRPS** | 2.06 |
| **Coverage 90%** | 0.869 (86.9%) |
| **Interval Width 90%** | 10.98 K |
| **Calibration Error** | 0.0167 |

**评价**: 树模型在测试集上表现良好，R²达到0.793，覆盖率接近目标90%，校准误差很小。

### 1.2 U-Net Model

**配置文件**: `output/results/unet_results.json`

| 指标 | 值 |
|------|-----|
| **RMSE** | 1.10 K |
| **MAE** | 0.75 K |
| **R²** | 0.983 |
| **MAPE** | 0.24% |
| **CRPS** | 0.74 |
| **Coverage 90%** | 0.994 (99.4%) |
| **Interval Width 90%** | 8.17 K |
| **Calibration Error** | 0.0874 |

**评价**: U-Net模型表现最佳，R²高达0.983，所有指标都明显优于其他模型。覆盖率略高于目标（99.4% vs 90%），说明不确定性估计可能偏保守。

### 1.3 GP Model (Sparse Gaussian Process)

**配置文件**: `output/results/gp_results.json`

| 指标 | 值 |
|------|-----|
| **RMSE** | 5.20 K |
| **MAE** | 4.03 K |
| **R²** | 0.629 |
| **MAPE** | 1.29% |
| **CRPS** | 2.91 |
| **Coverage 90%** | 0.837 (83.7%) |
| **Interval Width 90%** | 14.30 K |
| **Calibration Error** | 0.0175 |

**评价**: GP模型表现中等，R²为0.629。覆盖率略低于目标90%，预测区间宽度较大，说明不确定性估计可能偏高。

## 2. 交叉验证结果

### 2.1 Tree Model - 空间块交叉验证

**配置文件**: `output/results/cv/tree_space_cv.json`

| 指标 | 均值 | 标准差 | 最小值 | 最大值 |
|------|------|--------|--------|--------|
| **RMSE** | 6.84 K | 0.59 K | 5.86 K | 7.69 K |
| **MAE** | 5.21 K | 0.55 K | 4.36 K | 6.04 K |
| **R²** | 0.327 | 0.129 | 0.088 | 0.441 |
| **CRPS** | 4.00 | 0.51 | 3.31 | 4.90 |
| **Coverage 90%** | 0.629 (62.9%) | 0.092 | 0.460 | 0.709 |
| **Interval Width 90%** | 11.66 K | 1.89 K | 9.40 K | 14.10 K |

**评价**: 空间块CV显示树模型在不同空间区域的泛化能力中等，R²均值为0.327，覆盖率低于目标90%，说明模型对空间变化的适应性有待提高。

### 2.2 Tree Model - 时间块交叉验证

**配置文件**: `output/results/cv/tree_time_cv.json`

| 指标 | 均值 | 标准差 | 最小值 | 最大值 |
|------|------|--------|--------|--------|
| **RMSE** | 5.29 K | 0.90 K | 4.05 K | 6.73 K |
| **MAE** | 4.15 K | 0.77 K | 3.14 K | 5.41 K |
| **R²** | 0.569 | 0.234 | 0.117 | 0.744 |
| **CRPS** | 3.09 | 0.61 | 2.30 | 4.11 |
| **Coverage 90%** | 0.675 (67.5%) | 0.065 | 0.554 | 0.731 |
| **Interval Width 90%** | 10.64 K | 0.67 K | 9.40 K | 11.39 K |

**评价**: 时间块CV显示树模型在时间泛化方面表现较好，R²均值为0.569，优于空间块CV。说明模型能较好地捕获时间模式。

### 2.3 GP Model - 空间块交叉验证

**配置文件**: `output/results/cv/gp_space_cv.json`

| 指标 | 均值 | 标准差 | 最小值 | 最大值 |
|------|------|--------|--------|--------|
| **RMSE** | 14.14 K | 8.82 K | 5.78 K | 25.84 K |
| **MAE** | 11.21 K | 7.22 K | 4.36 K | 23.85 K |
| **R²** | -3.29 | 4.93 | -12.18 | 0.450 |
| **CRPS** | 9.91 | 6.93 | 3.34 | 19.30 |
| **Coverage 90%** | 0.388 (38.8%) | 0.195 | 0.026 | 0.460 |
| **Interval Width 90%** | 9.59 K | 0.80 K | 9.87 K | 11.66 K |

**评价**: GP模型在空间块CV上表现较差且不稳定。R²均值为负（-3.29），说明在某些空间块上预测不如简单均值。主要原因可能是：
1. 训练数据量限制（每个fold仅50,000个点）
2. 不同空间区域的数据分布差异较大
3. 模型初始化参数需要进一步优化

**改进方向**:
- 增加训练数据量
- 调整超参数（诱导点数量、长度尺度等）
- 尝试时间块CV评估时间泛化能力

## 3. 模型对比总结

基于测试集结果的综合对比：

| 模型 | RMSE ↓ | R² ↑ | CRPS ↓ | Coverage 90% → 0.9 | 评价 |
|------|--------|------|--------|-------------------|------|
| **U-Net** | **1.10** | **0.983** | **0.74** | 0.994 (略高) | ⭐⭐⭐⭐⭐ 最佳 |
| **Tree (XGBoost)** | 3.89 | 0.793 | 2.06 | 0.869 (略低) | ⭐⭐⭐⭐ 良好 |
| **GP (Sparse)** | 5.20 | 0.629 | 2.91 | 0.837 (略低) | ⭐⭐⭐ 中等 |

### 3.1 优势分析

**U-Net优势**:
- 所有回归指标最优（RMSE, R²）
- 最低的CRPS，说明概率预测最准确
- 非常高的覆盖率（99.4%），不确定性估计全面

**Tree模型优势**:
- 计算速度快，易于训练
- 良好的可解释性
- 测试集上表现稳定

**GP模型优势**:
- 理论保证的概率框架
- 自然的不确定性量化
- 适合小数据集（虽然本次实验中表现一般）

### 3.2 局限性分析

**U-Net局限性**:
- 需要大量内存（图像模式）
- 训练时间较长
- 覆盖率略高于目标，可能过于保守

**Tree模型局限性**:
- 交叉验证显示空间泛化能力有限
- 概率预测依赖经验估计（非真正的概率模型）

**GP模型局限性**:
- 空间块CV表现不稳定
- 训练数据量受限时性能下降明显
- 计算复杂度高

## 4. 实验配置

### 4.1 数据配置
- **训练数据**: `training_tensor` (100×200×31)
- **测试数据**: `test_tensor` (100×200×31)
- **缺失值比例**: 训练集约40%，测试集约50%

### 4.2 模型配置

**Tree Model**:
- 模型类型: XGBoost
- 树数量: 100
- 量化回归: 启用（用于不确定性估计）

**U-Net Model**:
- 基础通道数: 32
- 批次大小: 4
- 训练轮数: 50
- 学习率: 1e-4

**GP Model**:
- 核函数: Matern 3/2 (空间 + 时间)
- 诱导点数量: 500
- 批次大小: 1000
- 训练轮数: 50
- 学习率: 0.01

### 4.3 交叉验证配置

- **空间块CV**: 水平分割，5折
- **时间块CV**: 按时间顺序，5折
- **K折CV**: 随机分割，5折

## 5. 可视化结果

所有可视化结果保存在 `output/figures/` 目录：

- `tree_scatter.png`: Tree模型预测散点图
- `tree_residuals.png`: Tree模型残差分布
- `unet_mean_day15.png`: U-Net第15天预测均值
- `unet_std_day15.png`: U-Net第15天预测标准差
- `unet_error_day15.png`: U-Net第15天预测误差
- `gp_scatter.png`: GP模型预测散点图
- `gp_residuals.png`: GP模型残差分布

## 6. 结论与建议

### 6.1 主要发现

1. **U-Net表现最佳**: 在所有评估指标上都明显优于其他模型，特别适合图像模式的时空插值任务。

2. **Tree模型平衡性好**: 在测试集上表现良好，速度快，但在交叉验证中显示空间泛化能力有限。

3. **GP模型潜力未完全发挥**: 在测试集上表现中等，但在空间块CV中表现不稳定，需要进一步优化。

### 6.2 改进建议

1. **GP模型优化**:
   - 增加训练数据量
   - 优化超参数（诱导点数量、长度尺度初始化）
   - 尝试不同的核函数组合

2. **模型融合**:
   - 考虑集成U-Net和Tree模型
   - 使用Stacking或加权平均

3. **特征工程**:
   - 添加时间特征（季节、周期等）
   - 空间特征（邻域统计量）

4. **评估指标**:
   - 重点关注CRPS和覆盖率
   - 分析不同区域和时间的预测性能

---

*最后更新: 2024年*
*文档位置: `doc/EXPERIMENTAL_RESULTS.md`*

